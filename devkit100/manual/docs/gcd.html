<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css">

<title></title>

</head><body>

<p class=midasi>概要</p>
<p class=nakami>
　絵を描いたらGCD(Goluah Cell Data)あるいは単に「セル」や「矩形データ」と呼ばれているものを準備します。標準的なキャラクターの場合はcell.gcdというファイル名のファイルがそれです。<br>
　データは大きく2つにわかれています。<br>
<br>
・矩形データ部分<br>
　ビットマップの切り取り矩形を定義します。<br>
　保持するのはあくまで切り取り矩形のデータですので、ビットマップの画像そのものを変更した場合は
ゲーム中での表示も変化します（ずれます）。<br>
<br>
・セルデータ<br>
　ゲーム中でのキャラクターの足元の座標からの矩形描画先のオフセットをつけるためのものです。
ゲーム中での画像表示指定は、このセルの番号によって行います。<br>
　1つのセルは複数の矩形の重ねあわせによって構成することが可能です。<br>
　また、セルにはあたり判定のデータも含まれます。<br>
　セルの 0 番は空セルとして予約されているので、0番のセルにはなにも入れられません。通常のキャラクターの場合、1-99番が「<a href="ref_defaultcell.html">デフォルトセル</a>」として予約されており、それぞれどういう絵を入れておくかが決まっています。（主に喰らいとガードポーズ）gobject.h を参照して、適切な絵を割り当ててください。<br>
<br>
<br>
　GCDデータファイルは付属の are_editer.exe を使って作成します。
　尚、XP より前のWindowsを使用している場合はこのツールの起動のために GDIPLUS.DLL というDLLが必要になるので、適切なサイトからダウンロードしてインストールしてください。
<br>
</p>


<br><br>


<p class=midasi>ツール概要</p>
<p class=nakami>
　左側に表示ウインドウ、右側に操作のためのボタン類があります。<br>
　Ctrl+SやCtrl+C,V のような気の利いたショートカットキーはありません。あと、終了時にも「データが変更されています〜」とかいちいち確認しませんので注意されたし。<br>
<br>
　右側のタブを弄くれば大体わかると思います。<br>
　矩形編集モード/セル編集モードは、タブの切り替えによってなされます。左側の表示ウィンドウの内容およびマウスによる操作もこのモード切替に連動して変化します。
</p>



<br><br>



<p class=midasi>初期ファイルの作成</p>
<p class=nakami>
　編集時は .gcd（データファイル）といっしょにビットマップを読み込まなければ編集作業が行えません。ビットマップは1つの .gcd データに対して最大12枚使用することができますが、いちいち指定するのは面倒なので、gcd ファイルをロードしたときに同じディレクトリにある image1〜12.bmpを自動的にロードする仕様になっています。なので、一番初めにデータを作成するときには、空のgcd ファイルを一旦セーブしてからそれをロードしなおすことによってビットマップを読み込ませてください。
<br>


<br><br>


<p class=midasi>矩形データ編集機能</p>
<p class=nakami>
　矩形は1番から、最大1023番まで定義することができます。<br>
　セルと違ってどの番号に何の画像を割り当てたか？はあまり関係ないので、空きインデックスに移動（BLANK>ボタン または 表示領域でShift+右クリ）し、1枚分の絵をくくり(表示領域のうえでマウスドラッグ)、決定（決定ボタン または 表示領域を右クリ）　・・・を、描いたアニメーションパターン全てに関して行えばOK。単純作業です。<br>
<br>
　あと、あんまし使わないかもしれませんが、矩形の「重心」を指定するとセル編集時に矩形を回転・拡大/縮小するときの中心として、重心が使用されます。
</p>

<p class=midasi2>表示ウインドウ</p>
<p class=nakami2>
　image1〜12.bmp のうち、現在選択中のビットマップが表示されます。<br>
　現在編集中の矩形が、表示しているビットマップ内にある場合は赤い四角で表示されます。重心位置は青い十字マークで表示されます。<br>
<br>
　「矩形指定モード」の場合は(通常)、領域をマウス左ボタンでドラッグすると仮の矩形領域が作られます。その状態で、[全般] タブの決定ボタンを押すか、右クリックすると、実際にその領域が矩形データとして現在の番号の矩形に設定されます。<br>
<br>
　「重心指定モード」の場合は右クリックでポイントが指定されます。<br>
<br>
　どちらのモードでもShiftキー+右クリックで、現在編集中の矩形番号を、次の空き矩形番号へ移動することができます。<br>
</p>

<p class=midasi2>[全般]タブ</p>
<p class=nakami2>
・編集中の矩形番号 ： 現在の矩形番号です<br>
・編集中の矩形番号のヨコのボタン ：  現在の矩形番号を移動します<br>
・ >> ボタン　：　10個番号を進めます<br>
・ << ボタン　：　10個番号を戻します<br>
・ FIND > 　ボタン　：　次の「空でない」番号を探して移動します<br>
・ < FIND 　ボタン　：　前の「空でない」番号を探して移動します<br>
・ BLANK > ボタン　：　次の「空の」番号を探して移動します<br>
・ < BLANK ボタン　：　前の「空の」番号を探して移動します<br>

・矩形指定モードラジオボタン：<br>
	矩形指定モードのときに、表示ウインドウ上でマウスをドラッグし、<br>
	決定ボタンを押すことにより矩形データを登録します。<br>
<br>
・重心指定モードラジオボタン：<br>
重心指定モードのときは、表示ウインドウ上をクリックすると<br>
矩形の重心位置を指定できます。<br>
<br>
・決定ボタン　：　矩形指定モードのときに、矩形決定を行います。<br>
　　　　　　　　　右クリックで代用できます。<br>
<br>
・消去ボタン　：　現在の矩形データをクリアします<br>
<br>
・ビットマップコンボボックス　：　ビットマップを変更します<br>
<br>
・現在の矩形が定義されているところに移動ボタン：ビットマップを<br>
	現在の矩形が定義されているビットマップ番号に変更します。<br>
<br>
</p>

<p class=midasi2>[tools]タブ</p>
<p class=nakami2>
空の矩形を消去する ボタン：
　矩形領域に含まれるピクセルをチェックし、全てが透明色であった場合にその矩形を消去します。ビットマップの読み込みに失敗している場合は全データが消去されることになるので注意してください。データ整理用。

矩形番号を整理するボタン：
　空の矩形がある場合、それを消去して全体の番号を詰めます。このとき、セルが参照している矩形番号も適切に変更されます。データ整理用。
</p>



<p class=midasi>セルデータ編集機能</p>
<p class=nakami>
　基本的にこのモードのときに左側のウインドウに表示されるイメージが、ゲーム中で表示されるイメージそのものです。（微妙にアンチエリアスがかかっていたり、編集中矩形の画像が強調表示されていたりするのを除きます)<br>
　1つのセルは複数の矩形の組み合わせによって構成できることに注意してください。単純なキャラクターの場合は1つのセルに対して1つの矩形を設定して当たり判定をちょこちょこ設定するだけですんでしまうので、やれることがいっぱいありすぎて最初は戸惑うかもしれません。<br>
</p>

<p class=midasi2>[表示ウインドウ]</p>
<pre class=nakami2>
現在編集中のセルが描画されます。

太い十字マークがキャラクターの座標です。通常このマークがキャラクターの足元に
来るようにセルデータを構築します。

オフセット指定モードのときは、現在編集中の矩形以外は暗く表示されます。
また、リンクフラグによって描画された他番号のセルはさらに黒っぽく表示されます。
注：エディタでは一つ前のセルにリンクフラグが立てられている場合、前のインデックスの
　　セルも表示されていますが、ゲーム中ではリンクセルは、リンクの先頭となるセルを
　　指定しないと描画されません。

判定矩形編集モードのときのみ、3種類の矩形が描画されます。

赤い四角が重なり判定です。
ゲーム中ではお互いのこの矩形領域が重なったときに、互いに斥力を受けます。
また、相手の攻撃矩形が自分のこの矩形に衝突したときに攻撃を喰らいます。

黄色い四角が喰らい判定です。
赤矩形同様、相手の攻撃矩形との衝突判定が行われますが、
赤色矩形と重なっても斥力を受けません。

青い四角が攻撃判定です。
この矩形が相手の赤、または黄色矩形に衝突したとき、攻撃が当たったことになります。

注：複数のセルがリンクしていても、ゲーム中で有効なのは先頭セルの矩形のみです

緑色の十字マークは、セルの「重心」です。
</pre>

<p class=midasi2>[全般]タブ</p>
<pre class=nakami2>
編集中の矩形番号 ： 
その下のボタン類 ： (説明略。矩形編集モードと基本的に同じです)

コピー ボタン ： 現在のセルをコピーします（注：Ctrl+Cではできません）
貼り付け ボタン ： コピーしたセルをコピーします（注：Ctrl+Vではできません）
削除 ボタン ： 現在の矩形を削除します

次のセルとリンクする：
	通常1つのセルは8つまでの矩形データの組み合わせで作られますが、
	パーツの数が8つでは足りない場合、次のセルもいっしょに描画する
	ことができます。

Zバッファへの書き込みを行わない ： 通常はいじる必要ありません
Zテストを行わない ： 通常はいじる必要ありません
重心を中心にスケールする ： 通常はいじる必要ありません
足元を中心に回転する ： 通常はいじる必要ありません

#defineエディットボックス：
	DLLから表示セルのインデックスを指定するときに使用する定義名を
	指定します。「.h 保存」で保存したファイルを見てみてください。
</pre>

<p class=midasi2>[マウス操作]タブ</p>
<pre class=nakami2>
オフセット　：　表示ウインドウ上をドラッグすると、現在のセルの現在の矩形の
	オフセット位置を操作することができます。

オフセット（微調整）：オフセットと同様です。マウスをドラッグしたときの移動量が小さいです。

判定矩形　：　表示ウインドウ上をドラッグして矩形を作ってから、
　　　　　　　下のボタンを押すことによってあたり判定データをセットすることができます。

重心　：　表示ウインドウ上をクリックすることによって、セルの重心位置を
	指定できるようになります。重心は、プログラム側でキャラクターの回転角度を
	指定したときに回転の中心として使用されます。

マーカーポイント設定：表示ウインドウをクリックしてマーカーを設定します。
	マーカーはデータには何も影響しません。複数のセルで足元以外の（頭とか）位置を統一したいときや、
	2セル間で踏み込み量(?)のオフセットを計りたいときなどに使用します

none：表示ウインドウ上でのマウス操作が無効になります

矩形決定 ボタンx9　：　それぞれのあたり判定矩形を設定します。
		判定矩形モードのときのみ有効です。
</pre>

<p class=midasi2>[矩形操作]タブ</p>
<pre class=nakami2>
編集する矩形インデックス：1つのセルは8つまでの矩形の組み合わせで構成する
	ことができます。このラジオボタンで、現在のセルのどの矩形を編集するかを
	指定します。

割り当てる矩形番号：現在のセルの現在の矩形（↑で指定したもの）に対して、
	何番の矩形（矩形編集モードで作成した矩形の番号）を割り当てるかを
	指定します。ボタンの意味は略。

X反転：現在のセルの現在の矩形に、X反転フラグを設定します
Y反転：現在のセルの現在の矩形に、Y反転フラグを設定します

加算合成：現在のセルの現在の矩形に、加算合成フラグを設定します

A：現在のセルの現在の矩形の、透明度を設定します
R：現在のセルの現在の矩形の、赤色値を設定します
G：現在のセルの現在の矩形の、緑色値を設定します
B：現在のセルの現在の矩形の、青色値を設定します

scaleX：現在のセルの現在の矩形の　X拡大率を設定します
scaleY：現在のセルの現在の矩形の　Y拡大率を設定します

rot：現在のセルの現在の矩形の　回転角を設定します
</pre>

<p class=midasi2>[表示]タブ</p>
<pre class=nakami2>
表示倍率 ： 表示ウインドウの、表示倍率を設定します
マーカーON　：　マーカー表示を切り替えます

＜注意＞表示チェックで設定できる項目は、プログラム側で設定される可能性のある項目です。
　　主にテスト目的でついているものなので、これをいじりっぱなしのまま編集を行って
　　後でずれずれになった〜なんてことのないようにしてください。
　　判定矩形や重心位置の表示は、この項目の設定に影響を受けません。

X反転テスト　：　キャラクタ左向き時の表示を確認します
Y反転テスト　：　Y反転時の表示を確認します。

オフセット　：　キャラクタ座標を(0,0)から移動するテスト
スケール　：　キャラクタのスケールテスト
回転　：　キャラクタの回転テスト

クリア　：　テスト用表示設定をクリアします
</pre>


<br><br><br>


<p class=midasi>＜参考＞データ構造</p>
<pre class=nakami>
矩形データ部
　　{
　　　　ビットマップ番号
　　　　切り取り矩形（left,top,right,bottom）
　　　　矩形重心（セル上で回転・拡大縮小するときに中心として使用）
　　}x1024

セルデータ部
　　{
　　　　{
　　　　　　矩形データインデックス
　　　　　　表示オフセット(x,y)
　　　　　　回転角度
　　　　　　拡大率(x,y)
　　　　　　リンクフラグ
　　　　　　X反転フラグ
　　　　　　Y反転フラグ
　　　　　　加算合成フラグ※
　　　　}x8
　　　　重心位置(x,y)
　　　　Zバッファ書き込みOFFフラグ※
　　　　ZテストOFFフラグ※
　　　　スケールの中心として重心を使用するフラグ（デフォルトは足元）※
　　　　回転の中心として足元座標を使用するフラグ（デフォルトは重心）※
　　　　色(ARGB , 0〜1) ※
　　}x1024

あたり判定矩形データ部
　　{
　　　　{ 重なり判定矩形（left,top,right,bottom） } x3
　　　　{ 喰らい判定矩形（left,top,right,bottom） } x3
　　　　{ 攻撃判定矩形（left,top,right,bottom） } x3
　　}x1024

セル名定義部
　　{
　　　　名前
　　}x1024

※0.70形式でセーブするとデータは失われます
注 ： 必ずしもファイルに入ってる順番とあってるという保証はありません。
　　なにか忘れてるのとかあるかも。
</pre>

<hr><p align="center"><a href="../index.html">もどる</a></p>
</body>
